
<html>

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Library</title>
        <link rel="icon" href="book.png">
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous">
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
            crossorigin="anonymous">

    </head>

    <body>

        <div class="container">
            <br>

            <div class="card">
                <div class="card-header">New book:</div>
                <div class="card-body">
                    <div class="mb-3">
                        <label>Ttile:</label>
                        <input type="text" id="title-box"
                            class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Author:</label>
                        <input type="text" id="author-box"
                            class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>ISBN:</label>
                        <input type="text" name="isbn" id="isbn-box"
                            class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Description:</label>
                        <textarea type="text" id="description-box"
                            class="form-control" rows="5"></textarea>
                    </div>


                </div>
            </div><br>
            <div class="card">
                <div class="card-header">Discard or save</div>
                <div class="card-body">
                    <button class="btn btn-primary"
                        onclick="save()">
                        Save</button>
                    <button class="btn btn-secondary"
                        onclick="discard(false)">
                        Discard</button>
                </div>
            </div>
        </div>

        <script>
        function discard(force)
        {
            if(force||window.confirm('Do you really want to close without saving your work?'))window.close();
        }
        function save()
        {
            let book = {
                title: document.getElementById('title-box').value,
                author: document.getElementById('author-box').value,
                isbn: document.getElementById('isbn-box').value,
                description:  document.getElementById('description-box').value
            }
            fetch('https://library.karol.gay/books/add', {
                        method: 'POST', // *GET, POST, PUT, DELETE, etc.
                        body: JSON.stringify(book) // body data type must match "Content-Type" header
                    }).then(response => {
                        if(response.ok)
                        discard(true);
                        else
                        window.alert('Error adding this book');



                    })
        }

    </script>

    </body>



</html>
